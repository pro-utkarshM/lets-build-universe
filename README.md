# Project Proposal: Open-Source End-to-End Chip Fabrication Simulation

## Motivation and Goals

Modern chip design is moving toward openness: public PDKs and EDA tools lower barriers and democratize innovation ([SKY’s the Limit with the SKY130 Open-Source PDK - Skywater Technology](https://www.skywatertechnology.com/sky130-open-source-pdk/#:~:text=Three%20years%20ago%2C%20SkyWater%2C%20Efabless,exciting%20social%20developments%20also%20emerged)) ([Open-source hardware: a growing movement to democratize IC design - Michigan Engineering News](https://news.engin.umich.edu/2023/01/open-source-hardware-a-growing-movement-to-democratize-ic-design/#:~:text=One%20of%20the%20benefits%20of,%E2%80%9D)). This project aims to build a fully open-source workflow from raw silicon to running software, blending physics-level fabrication simulation with digital design. Key goals include:
- **Process Simulation:** Model semiconductor fabrication steps (doping, diffusion, deposition, photolithography, etching) using open-source physics tools (molecular dynamics, TCAD, CFD).  
- **Custom CPU Design:** Define a new ISA and implement the CPU in RTL (e.g. Verilog/Chisel), using frameworks like LLVM TableGen to specify instructions ([Tools for Learning LLVM TableGen - The LLVM Project Blog](https://blog.llvm.org/posts/2023-12-07-tools-for-learning-llvm-tablegen/#:~:text=For%20example%2C%20it%20is%20used,line%20options%2C%20and%20so%20on)).  
- **Physical Chip Layout:** Synthesize and place-and-route the design with open tools, run DRC/LVS, and generate GDSII, using an open PDK (e.g. SkyWater 130nm) ([SKY’s the Limit with the SKY130 Open-Source PDK - Skywater Technology](https://www.skywatertechnology.com/sky130-open-source-pdk/#:~:text=Three%20years%20ago%2C%20SkyWater%2C%20Efabless,exciting%20social%20developments%20also%20emerged)).  
- **Simulation & Testing:** Verify RTL and system behavior using open simulators (Icarus Verilog/Verilator for HDL, and an ISA-level emulator) to ensure correctness.  
- **Toolchain Development:** Build an assembler and compiler for the new ISA using LLVM or GCC backends ([Tools for Learning LLVM TableGen - The LLVM Project Blog](https://blog.llvm.org/posts/2023-12-07-tools-for-learning-llvm-tablegen/#:~:text=For%20example%2C%20it%20is%20used,line%20options%2C%20and%20so%20on)).  
- **Software Integration:** Develop a minimal OS or runtime (e.g. a simple Unix-like kernel such as xv6 ([
6.1810 / Fall 2024
](https://pdos.csail.mit.edu/6.1810/2024/xv6.html#:~:text=Xv6%20is%20a%20teaching%20operating,1810))) to run on the simulated CPU.  

## Workflow Overview

The project proceeds in staged phases integrating materials and design. First, a **process simulation** phase will model each fabrication step at the physical level. Next, a **device modeling** sub-phase uses these results to characterize transistors (via open TCAD). Then a **digital design** phase defines the ISA and RTL, followed by a **back-end design** phase for layout. Parallel tracks will build the software stack (assembler, compiler, OS). Milestones at each stage ensure all pieces integrate smoothly.

## Stage 1: Physics-Based Fabrication Modeling

This stage uses physics simulation to emulate semiconductor manufacturing. TCAD simulators (such as Charon ([Charon – Sandia National Laboratories](https://charon.sandia.gov/#:~:text=Charon%20is%20an%20open,systems%20that%20support%20the%C2%A0MPI%20standard)) or DEVSIM ([GitHub - devsim/devsim: TCAD Semiconductor Device Simulator](https://github.com/devsim/devsim#:~:text=DEVSIM%20))) solve the diffusion equations for implanted dopants and predict transistor I–V characteristics. The dopant profiles from TCAD feed into device models to validate transistor behavior. Film deposition (e.g. chemical vapor deposition) and plasma etching are modeled with continuum tools: for example, the open-source CFD toolkit OpenFOAM can simulate material flow and etching ([SOMAFOAM: An OpenFOAM based solver for continuum ...](https://www.sciencedirect.com/science/article/abs/pii/S0010465521000229#:~:text=SOMAFOAM%3A%20An%20OpenFOAM%20based%20solver,for%20etching%20and%20deposition)).

Photolithography is modeled with optical simulation: light passing through a mask produces an aerial image on the photoresist. An open-source lithography simulator can compute the diffraction and interference of light from a given mask ([GitHub - quarterwave0/LithographySimulator: A Python-based tool for modeling optical photolithography](https://github.com/quarterwave0/LithographySimulator#:~:text=LithographySimulator%20is%20an%20open,for%20modeling%20optical%20lithography)). 

 ([GitHub - quarterwave0/LithographySimulator: A Python-based tool for modeling optical photolithography](https://github.com/quarterwave0/LithographySimulator)) *Figure: A simulated aerial image from an open-source lithography tool. The mask pattern (left) produces an intensity distribution (right) on the wafer.* Photolithography simulation requires modeling how light projects the mask pattern onto resist and how photoresist develops. After exposure, resist development and etching can be simulated (e.g. via boolean or level-set methods) to yield final feature shapes. These models together create a step-by-step physics-based simulation of chip fabrication, from silicon bulk to patterned wafer.

## Stage 2: Custom ISA and RTL Design

In this stage a custom Instruction Set Architecture is specified and implemented in hardware description language. The ISA (registers, opcodes, instruction formats) is defined and documented. Tools like LLVM’s TableGen can be used to describe the new instructions and generate assembler/disassembler support ([Tools for Learning LLVM TableGen - The LLVM Project Blog](https://blog.llvm.org/posts/2023-12-07-tools-for-learning-llvm-tablegen/#:~:text=For%20example%2C%20it%20is%20used,line%20options%2C%20and%20so%20on)). The CPU datapath and control logic (pipeline stages, ALU, registers, etc.) are written in Verilog or a similar HDL. This RTL is simulated with open-source tools (Verilator, Icarus Verilog) to verify correctness. Once verified, it will be synthesized to a gate-level netlist using an open-source synthesizer (e.g. Yosys).

## Stage 3: Physical Design (Layout and GDSII)

The gate-level netlist is then used for full chip layout with open-source EDA tools. A floorplan is created and an automated flow (e.g. the OpenROAD flow ([GitHub - The-OpenROAD-Project/OpenROAD-flow-scripts: OpenROAD's scripts implementing an RTL-to-GDS Flow. Documentation at https://openroad-flow-scripts.readthedocs.io/en/latest/](https://github.com/The-OpenROAD-Project/OpenROAD-flow-scripts#:~:text=Synthesis%20%3A%20Inputs%20%20,Netlist%2C%20SDC))) is run to perform placement, clock-tree synthesis, and routing. The design uses an open PDK (for example, the SkyWater SKY130 130nm PDK ([SKY’s the Limit with the SKY130 Open-Source PDK - Skywater Technology](https://www.skywatertechnology.com/sky130-open-source-pdk/#:~:text=Three%20years%20ago%2C%20SkyWater%2C%20Efabless,exciting%20social%20developments%20also%20emerged))) to ensure layer definitions and design rules are available. Layout editing tools (Magic or KLayout) perform design-rule checking and layout-vs.-schematic (LVS). Finally, the completed chip design is exported in GDSII format for fabrication or further analysis ([GitHub - The-OpenROAD-Project/OpenROAD-flow-scripts: OpenROAD's scripts implementing an RTL-to-GDS Flow. Documentation at https://openroad-flow-scripts.readthedocs.io/en/latest/](https://github.com/The-OpenROAD-Project/OpenROAD-flow-scripts#:~:text=%3A%20Global%20Routing%20%3A%20Detailed,KLayout)).

## Stage 4: Simulation and Verification

At this stage the complete design is thoroughly tested in simulation. Gate-level RTL simulation is performed with open-source Verilog simulators. For example, Icarus Verilog is a free Verilog compiler/simulator ([Icarus Verilog for Windows](https://bleyer.org/icarus/#:~:text=Icarus%20Verilog%20is%20a%20free,under%20the%20GNU%20GPL%20license)) that can run the CPU model. Testbenches feed instruction sequences into the CPU and check that the outputs match expected behavior. A cycle-accurate or instruction-level emulator for the custom ISA can also execute compiled programs to validate system behavior. Any bugs found in simulation lead to corrections in the RTL or verification models.

## Stage 5: Assembler and Compiler Toolchain

A full software toolchain for the new ISA is developed. An assembler translates human-readable assembly into machine code for the CPU. For higher-level language support, an existing compiler framework can be adapted: for example, LLVM can be extended with a custom backend by defining the ISA in TableGen ([Tools for Learning LLVM TableGen - The LLVM Project Blog](https://blog.llvm.org/posts/2023-12-07-tools-for-learning-llvm-tablegen/#:~:text=For%20example%2C%20it%20is%20used,line%20options%2C%20and%20so%20on)), or a GCC backend can be created. The toolchain includes a linker and runtime (or libraries) to build executable programs. Generated binaries are then run on the RTL simulator or emulator to test the end-to-end system.

## Stage 6: Minimal Operating System

Finally, a simple operating system or runtime environment is created to run on the CPU. This might begin as a bootloader plus a tiny kernel that provides basic services (memory management, I/O, scheduling). An educational Unix-like kernel (similar to MIT’s xv6 ([
6.1810 / Fall 2024
](https://pdos.csail.mit.edu/6.1810/2024/xv6.html#:~:text=Xv6%20is%20a%20teaching%20operating,1810))) could serve as a reference. The OS provides system calls (e.g. for console output or basic file I/O) so that user programs can run. Even a minimal OS that, for example, prints to a console or blinks an LED would demonstrate the entire hardware/software stack. The OS is compiled with the new toolchain and tested on the simulated CPU.

## Milestones and Deliverables

- **Process Simulation Prototype:** Demonstrate dopant diffusion and simple deposition/etch simulation for basic test structures.  
- **Device Model Validation:** Simulate a transistor using the process models and verify that its I–V curves match expectations.  
- **ISA Definition:** Finalize the custom instruction set architecture and document its encoding.  
- **RTL CPU Model:** Implement the CPU in HDL and verify it executes instructions correctly.  
- **Physical Design (GDSII):** Synthesize the netlist, generate a layout (GDSII), and perform DRC/LVS verification.  
- **Software Toolchain:** Build a working assembler and compiler that produce correct binaries for the CPU.  
- **OS Boot:** A minimal OS or runtime successfully boots and runs simple programs on the simulated hardware.  

## Recommended Open-Source Tools and Platforms

- **Process Simulation:** LAMMPS (molecular dynamics), OpenFOAM (CFD) [SOMAFOAM: An OpenFOAM based solver for continuum ...](https://www.sciencedirect.com/science/article/abs/pii/S0010465521000229#:~:text=SOMAFOAM%3A%20An%20OpenFOAM%20based%20solver,for%20etching%20and%20deposition), open TCAD (Charon [Charon – Sandia National Laboratories](https://charon.sandia.gov/#:~:text=Charon%20is%20an%20open,systems%20that%20support%20the%C2%A0MPI%20standard), DEVSIM [GitHub - devsim/devsim: TCAD Semiconductor Device Simulator](https://github.com/devsim/devsim#:~:text=DEVSIM%20)), and optical lithography simulators [GitHub - quarterwave0/LithographySimulator: A Python-based tool for modeling optical photolithography](https://github.com/quarterwave0/LithographySimulator#:~:text=LithographySimulator%20is%20an%20open,for%20modeling%20optical%20lithography).  
- **Hardware Design:** Verilog/VHDL (RTL), Yosys (synthesis) [GitHub - The-OpenROAD-Project/OpenROAD-flow-scripts: OpenROAD's scripts implementing an RTL-to-GDS Flow. Documentation at https://openroad-flow-scripts.readthedocs.io/en/latest/](https://github.com/The-OpenROAD-Project/OpenROAD-flow-scripts#:~:text=Synthesis%20%3A%20Inputs%20%20,Netlist%2C%20SDC), Icarus Verilog/Verilator (simulation) [Icarus Verilog for Windows](https://bleyer.org/icarus/#:~:text=Icarus%20Verilog%20is%20a%20free,under%20the%20GNU%20GPL%20license).  
- **Physical Layout:** OpenROAD/Yosys/Qflow (RTL-to-GDS flows) [GitHub - The-OpenROAD-Project/OpenROAD-flow-scripts: OpenROAD's scripts implementing an RTL-to-GDS Flow. Documentation at https://openroad-flow-scripts.readthedocs.io/en/latest/](https://github.com/The-OpenROAD-Project/OpenROAD-flow-scripts#:~:text=Synthesis%20%3A%20Inputs%20%20,Netlist%2C%20SDC), Magic/KLayout for DRC/LVS, using the SkyWater SKY130 PDK [SKY’s the Limit with the SKY130 Open-Source PDK - Skywater Technology](https://www.skywatertechnology.com/sky130-open-source-pdk/#:~:text=Three%20years%20ago%2C%20SkyWater%2C%20Efabless,exciting%20social%20developments%20also%20emerged).  
- **Compiler Toolchain:** LLVM (TableGen) or GCC for the compiler backend [Tools for Learning LLVM TableGen - The LLVM Project Blog](https://blog.llvm.org/posts/2023-12-07-tools-for-learning-llvm-tablegen/#:~:text=For%20example%2C%20it%20is%20used,line%20options%2C%20and%20so%20on), GNU Binutils (assembler/linker).  
- **Software/OS:** An educational OS (such as xv6 [1810 / Fall 2024](https://pdos.csail.mit.edu/6.1810/2024/xv6.html#:~:text=Xv6%20is%20a%20teaching%20operating,1810)) as a reference implementation, or a simple custom microkernel.

This proposal outlines a comprehensive open-source project spanning semiconductor physics to software. By using open PDKs and tools at every stage [SKY’s the Limit with the SKY130 Open-Source PDK - Skywater Technology](https://www.skywatertechnology.com/sky130-open-source-pdk/#:~:text=Three%20years%20ago%2C%20SkyWater%2C%20Efabless,exciting%20social%20developments%20also%20emerged) [Open-source hardware: a growing movement to democratize IC design - Michigan Engineering News](https://news.engin.umich.edu/2023/01/open-source-hardware-a-growing-movement-to-democratize-ic-design/#:~:text=One%20of%20the%20benefits%20of,%E2%80%9D), the initiative fosters collaboration and learning in chip design without proprietary barriers. 

**Sources:** The plan leverages and cites existing open-source TCAD tools 
1. [Charon – Sandia National Laboratories](https://charon.sandia.gov/#:~:text=Charon%20is%20an%20open,systems%20that%20support%20the%C2%A0MPI%20standard)
2. [GitHub - devsim/devsim: TCAD Semiconductor Device Simulator](https://github.com/devsim/devsim#:~:text=DEVSIM%20),
3. lithography models [GitHub - quarterwave0/LithographySimulator: A Python-based tool for modeling optical photolithography](https://github.com/quarterwave0/LithographySimulator#:~:text=LithographySimulator%20is%20an%20open,for%20modeling%20optical%20lithography),
4. open-source digital design flows [GitHub - The-OpenROAD-Project/OpenROAD-flow-scripts: OpenROAD's scripts implementing an RTL-to-GDS Flow. Documentation at https://openroad-flow-scripts.readthedocs.io/en/latest/](https://github.com/The-OpenROAD-Project/OpenROAD-flow-scripts#:~:text=Synthesis%20%3A%20Inputs%20%20,Netlist%2C%20SDC)
5. [GitHub - The-OpenROAD-Project/OpenROAD-flow-scripts: OpenROAD's scripts implementing an RTL-to-GDS Flow. Documentation at https://openroad-flow-scripts.readthedocs.io/en/latest/](https://github.com/The-OpenROAD-Project/OpenROAD-flow-scripts#:~:text=%3A%20Global%20Routing%20%3A%20Detailed,KLayout),
6. compiler infrastructure [Tools for Learning LLVM TableGen - The LLVM Project Blog](https://blog.llvm.org/posts/2023-12-07-tools-for-learning-llvm-tablegen/#:~:text=For%20example%2C%20it%20is%20used,line%20options%2C%20and%20so%20on),
7. and educational OS examples [6.1810 / Fall 2024](https://pdos.csail.mit.edu/6.1810/2024/xv6.html#:~:text=Xv6%20is%20a%20teaching%20operating,1810) as noted above.
